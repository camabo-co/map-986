<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>座標マップ</title>
  <link rel="stylesheet" href="style/map.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
</head>
<body>

<script>
document.addEventListener("DOMContentLoaded", () => {
  if (!sessionStorage.getItem("authenticated")) {
    const password = prompt("このページにアクセスするにはパスワードを入力してください");
    if (password !== "wareranochonnma") {
      alert("パスワードが違います。アクセスできません。");
      location.href = "https://www.google.co.jp";
    } else {
      sessionStorage.setItem("authenticated", "true");
    }
  }
});
</script>
<ul>
      ${items.map(item => `
        <li>
          サーバー名: ${item.サーバー名} / X:${item.X}, Y:${item.Y} / Lv${item.レベル}
          ${type === "unclaimed"
            ? `<button onclick="window.opener.changeStatus('${item._id}')">取得済みに</button>`
            : `<button onclick="window.opener.restoreStatus('${item._id}')">未取得に戻す</button>`}
          <button onclick="window.opener.deleteItem('${item._id}')">削除</button>
        </li>
      `).join("")}
    </ul>
  </body>
</html>
  `);
  win.document.close();
}

loadMarkers();
</script>

<h1>座標登録フォーム</h1>
<form id="coordinateForm">
  <input type="text" name="サーバー名" placeholder="3〜4桁の数字" required />
  <input type="number" name="X" placeholder="X座標（0〜999）" required />
  <input type="number" name="Y" placeholder="Y座標（0〜999）" required />
  <select name="レベル">
    <option value="1">Lv1</option>
    <option value="2">Lv2</option>
    <option value="3">Lv3</option>
    <option value="4">Lv4</option>
    <option value="5">Lv5</option>
    <option value="6">Lv6</option>
    <option value="7">Lv7</option>
  </select>
  <button type="submit">登録する</button>
</form>

<div id="map"></div>

<button id="toggleUnclaimed">未取得リストを表示</button>
<button id="toggleClaimed">取得済みリストを表示</button>

</body>
</html>
